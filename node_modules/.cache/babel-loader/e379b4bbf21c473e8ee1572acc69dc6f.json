{"ast":null,"code":"import _defineProperty from\"D:/Business/Programming/react_lists/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/Business/Programming/react_lists/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/Business/Programming/react_lists/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"D:/Business/Programming/react_lists/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useContext,useState}from'react';import{AppContext}from'../../context/AppContext';import{DragDropContext,Droppable,Draggable}from'react-beautiful-dnd';import{useClickOutside}from'../Helpers/ClickOutside';import{useHistory}from'react-router-dom';import{ItemListItem}from'./ItemListItem';import{ItemCount}from'../ItemModes/ItemCount';import{ItemDate}from'../ItemModes/ItemDate';import{ItemTotal}from'../ItemModes/ItemTotal';import styles from'./ItemDetail.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ItemDetail(_ref){var itemId=_ref.itemId;var _useContext=useContext(AppContext),items=_useContext.items,dispatch=_useContext.dispatch;var item=_toConsumableArray(items).find(function(item){return item.id===itemId;});var _useState=useState('14rem'),_useState2=_slicedToArray(_useState,2),textAreaHeight=_useState2[0],setTextAreaHeight=_useState2[1];var _useState3=useState(item.status||false),_useState4=_slicedToArray(_useState3,2),itemChecked=_useState4[0],setItemChecked=_useState4[1];var _useState5=useState(item),_useState6=_slicedToArray(_useState5,2),itemInput=_useState6[0],setItemInput=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),itemTitle=_useState8[0],setItemTitle=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),itemDescription=_useState10[0],setItemDescription=_useState10[1];var listItems=_toConsumableArray(items).filter(function(i){return i.parent===item.id;});listItems.sort(function(a,b){return a.index>b.index?1:-1;});var _useState11=useState({title:'',description:'',tags:[],parent:itemId}),_useState12=_slicedToArray(_useState11,2),listItemInput=_useState12[0],setListItemInput=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),listItemAdd=_useState14[0],setListItemAdd=_useState14[1];var _useState15=useState(item.modules&&item.modules.date?true:false),_useState16=_slicedToArray(_useState15,2),itemDatesAdd=_useState16[0],setItemDatesAdd=_useState16[1];var _useState17=useState(item.modules&&item.modules.count?true:false),_useState18=_slicedToArray(_useState17,2),itemCountAdd=_useState18[0],setItemCountAdd=_useState18[1];var _useState19=useState(item.modules&&item.modules.total?true:false),_useState20=_slicedToArray(_useState19,2),itemTotalAdd=_useState20[0],setItemTotalAdd=_useState20[1];var history=useHistory();var nextId=function nextId(){return items.reduce(function(id,i){return i.id>id?i.id:id;},0)+1;};var handleChange=function handleChange(e){var _ref2=[e.target.name,e.target.value],name=_ref2[0],value=_ref2[1];setItemInput(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});if(name==='description'){setTextAreaHeight(e.target.scrollHeight>168?e.target.scrollHeight+'px':\"14rem\");}};var handleTitleSave=function handleTitleSave(e){if(e.charCode===13)handleTitle();};var handleTitle=function handleTitle(){if(!itemInput.title||/^\\s*$/.test(itemInput.title))return;var i=itemInput;dispatch({type:'UPDATE_ITEM',payload:i});setItemTitle(false);};var handleDescription=function handleDescription(){var i=itemInput;dispatch({type:'UPDATE_ITEM',payload:i});setItemDescription(false);};var handleChecked=function handleChecked(e){var check=e.target.checked;var listItem=item;listItem.status=check;dispatch({type:'UPDATE_ITEM',payload:listItem});setItemChecked(!itemChecked);};var handleAddTotal=function handleAddTotal(){var i=itemInput;i.modules?i.modules.total={value:0}:i.modules={total:{value:0}};dispatch({type:'UPDATE_ITEM',payload:i});setItemTotalAdd(true);};var handleAddTotalAll=function handleAddTotalAll(){var li=listItems.map(function(i){if(i.modules){i.modules.total={value:0};}else{i.modules={total:{value:0}};}return i;});dispatch({type:'UPDATE_ITEMS',payload:li});setItemTotalAdd(true);};var handleAddCountAll=function handleAddCountAll(){var li=listItems.map(function(i){if(i.modules){i.modules.count={value:0};}else{i.modules={count:{value:0}};}return i;});dispatch({type:'UPDATE_ITEMS',payload:li});setItemCountAdd(true);};var handleAddCount=function handleAddCount(){var i=itemInput;i.modules?i.modules.count={value:0}:i.modules={count:{value:0}};dispatch({type:'UPDATE_ITEM',payload:i});setItemCountAdd(true);};var handleAddDateAll=function handleAddDateAll(){var li=listItems.map(function(i){if(i.modules){i.modules.count={date:null};}else{i.modules={count:{value:null}};}return i;});dispatch({type:'UPDATE_ITEMS',payload:li});};var handleAddDate=function handleAddDate(){var i=itemInput;i.modules?i.modules.date={value:null}:i.modules={date:{value:null}};dispatch({type:'UPDATE_ITEM',payload:i});setItemDatesAdd(true);};// List Related\nvar handleDragEnd=function handleDragEnd(result){if(!result.destination)return;var _items=Array.from(listItems);var _items$splice=_items.splice(result.source.index,1),_items$splice2=_slicedToArray(_items$splice,1),reordered=_items$splice2[0];_items.splice(result.destination.index,0,reordered);_items.forEach(function(i,index){return i.index=index;});dispatch({type:'UPDATE_ITEMS',payload:_items});};var handleListItemChange=function handleListItemChange(e){var _ref3=[e.target.name,e.target.value],name=_ref3[0],value=_ref3[1];setListItemInput(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});};var handleListItemSave=function handleListItemSave(e){if(e.charCode===13)handleListItemAdd();};var handleListItemAdd=function handleListItemAdd(){if(!listItemInput.title||/^\\s*$/.test(listItemInput.title))return;var listItem=listItemInput;listItem.id=nextId();listItem.index=listItems.length;dispatch({type:'ADD_ITEM',payload:listItem});setListItemInput({title:'',description:'',tags:[],parent:item.id});setListItemAdd(false);};var progress=function progress(){var size=listItems.length;var checked=listItems.reduce(function(count,i){return i.status===true?count+1:count;},0);var total=checked/size*100;return isNaN(total)?'0%':total.toFixed(0)+'%';};var domTitle=useClickOutside(function(){setItemTitle(false);});var domDesc=useClickOutside(function(){setItemDescription(false);});return/*#__PURE__*/_jsx(\"div\",{className:\"card-panel \".concat(styles.detailCard),children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col s12 m8\",children:[itemTitle?/*#__PURE__*/_jsxs(\"div\",{ref:domTitle,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",value:itemInput.title,name:\"title\",className:styles.inputSmall,onChange:handleChange,onKeyPress:handleTitleSave}),/*#__PURE__*/_jsx(\"button\",{onClick:handleTitle,className:\"btn secondary\",children:\"Save\"}),/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return setItemTitle(false);},className:\"material-icons right \".concat(styles.iconClose),children:\"close\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:styles.checkBox,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"filled-in\",checked:itemChecked,onChange:handleChecked}),/*#__PURE__*/_jsx(\"span\",{})]}),/*#__PURE__*/_jsx(\"h5\",{onClick:function onClick(){return setItemTitle(true);},className:styles.heading,children:item.title}),/*#__PURE__*/_jsx(\"button\",{className:\"btn secondary right\",onClick:function onClick(){return history.goBack();},children:\"back\"})]}),itemDescription?/*#__PURE__*/_jsxs(\"div\",{ref:domDesc,children:[/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",style:{height:textAreaHeight},className:\"materialize-textarea card-panel \".concat(styles.textArea),placeholder:\"Description\",value:itemInput.description,name:\"description\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDescription,className:\"btn secondary\",children:\"Save\"}),/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return setItemDescription(false);},className:\"material-icons right \".concat(styles.iconClose),children:\"close\"})]}):/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setItemDescription(true);},className:\"card-panel \".concat(styles.description),children:item.description||'...'}),/*#__PURE__*/_jsx(ItemDate,{item:item,title:true,remove:true,editable:true,showDate:setItemDatesAdd}),/*#__PURE__*/_jsx(ItemCount,{item:item,title:true,remove:true,editable:true,showCount:setItemCountAdd}),/*#__PURE__*/_jsx(ItemTotal,{item:item,listItems:listItems,title:true,remove:true,editable:true,showTotal:setItemTotalAdd}),/*#__PURE__*/_jsxs(\"div\",{className:styles.listWrap,children:[/*#__PURE__*/_jsx(\"h5\",{className:styles.heading,children:\"Checklist\"}),/*#__PURE__*/_jsx(\"span\",{className:\"right \".concat(styles.progressPerc),children:progress()}),/*#__PURE__*/_jsx(\"div\",{className:styles.progressBar,children:/*#__PURE__*/_jsx(\"div\",{style:{width:progress()}})}),/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:handleDragEnd,children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"items\",children:function children(provided){return/*#__PURE__*/_jsxs(\"ul\",_objectSpread(_objectSpread({className:\"items\"},provided.droppableProps),{},{ref:provided.innerRef,children:[listItems.map(function(i,index){return/*#__PURE__*/_jsx(Draggable,{draggableId:'item_'+i.id,index:index,children:function children(provided){return/*#__PURE__*/_jsx(\"li\",_objectSpread(_objectSpread(_objectSpread({ref:provided.innerRef},provided.draggableProps),provided.dragHandleProps),{},{className:\"card-panel \".concat(styles.childItem,\" \").concat(styles.warp),children:/*#__PURE__*/_jsx(ItemListItem,{item:i})}));}},i.id);}),provided.placeholder]}));}})})]}),listItemAdd?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",value:listItemInput.title,name:\"title\",className:styles.inputSmall,onChange:handleListItemChange,onKeyPress:handleListItemSave}),/*#__PURE__*/_jsx(\"button\",{onClick:handleListItemAdd,className:\"btn secondary\",children:\"Save\"}),/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return setListItemAdd(false);},className:\"material-icons right \".concat(styles.iconClose),children:\"close\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setListItemAdd(true);},className:\"btn secondary\",children:\"Add item\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col s12 m4\",children:/*#__PURE__*/_jsxs(\"ul\",{className:styles.itemNav,children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h5\",{className:styles.heading,children:\"Modes\"})}),!itemCountAdd&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleAddCount,className:\"btn minor\",children:\"Add Card Count\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleAddCountAll,className:\"btn minor\",children:\"Add Checklist Counts\"})}),!itemDatesAdd&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleAddDate,className:\"btn minor\",children:\"Add Card Date\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleAddDateAll,className:\"btn minor\",children:\"Add Checklist Dates\"})}),!itemTotalAdd&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleAddTotal,className:\"btn minor\",children:\"Add Card Total\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleAddTotalAll,className:\"btn minor\",children:\"Add Checklist Totals\"})})]})})]})});}","map":{"version":3,"sources":["D:/Business/Programming/react_lists/src/components/ItemDetail/ItemDetail.js"],"names":["React","useContext","useState","AppContext","DragDropContext","Droppable","Draggable","useClickOutside","useHistory","ItemListItem","ItemCount","ItemDate","ItemTotal","styles","ItemDetail","itemId","items","dispatch","item","find","id","textAreaHeight","setTextAreaHeight","status","itemChecked","setItemChecked","itemInput","setItemInput","itemTitle","setItemTitle","itemDescription","setItemDescription","listItems","filter","i","parent","sort","a","b","index","title","description","tags","listItemInput","setListItemInput","listItemAdd","setListItemAdd","modules","date","itemDatesAdd","setItemDatesAdd","count","itemCountAdd","setItemCountAdd","total","itemTotalAdd","setItemTotalAdd","history","nextId","reduce","handleChange","e","target","name","value","prev","scrollHeight","handleTitleSave","charCode","handleTitle","test","type","payload","handleDescription","handleChecked","check","checked","listItem","handleAddTotal","handleAddTotalAll","li","map","handleAddCountAll","handleAddCount","handleAddDateAll","handleAddDate","handleDragEnd","result","destination","_items","Array","from","splice","source","reordered","forEach","handleListItemChange","handleListItemSave","handleListItemAdd","length","progress","size","isNaN","toFixed","domTitle","domDesc","detailCard","inputSmall","iconClose","checkBox","heading","goBack","height","textArea","listWrap","progressPerc","progressBar","width","provided","droppableProps","innerRef","draggableProps","dragHandleProps","childItem","warp","placeholder","itemNav"],"mappings":"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","sourcesContent":["import React, {useContext, useState} from 'react';\r\nimport { AppContext } from '../../context/AppContext';\r\nimport { DragDropContext, Droppable, Draggable  } from 'react-beautiful-dnd';\r\nimport { useClickOutside } from '../Helpers/ClickOutside';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { ItemListItem } from './ItemListItem';\r\nimport { ItemCount } from '../ItemModes/ItemCount';\r\nimport { ItemDate } from '../ItemModes/ItemDate';\r\nimport { ItemTotal } from '../ItemModes/ItemTotal';\r\n\r\nimport styles from './ItemDetail.module.css';\r\n\r\nexport default function ItemDetail({itemId}) {\r\n\r\n    const { items, dispatch } = useContext(AppContext);\r\n    const item = [...items].find(item => item.id === itemId)\r\n\r\n    const [textAreaHeight, setTextAreaHeight] = useState('14rem')\r\n\r\n    const [itemChecked, setItemChecked] = useState(item.status || false)\r\n    const [itemInput, setItemInput] = useState(item)\r\n    const [itemTitle, setItemTitle] = useState(false)\r\n    const [itemDescription, setItemDescription] = useState(false) \r\n\r\n    const listItems = [...items].filter(i => i.parent === item.id)\r\n    listItems.sort((a, b) => (a.index > b.index) ? 1 : -1)\r\n\r\n    const [listItemInput, setListItemInput] = useState({title:'', description:'', tags:[], parent:itemId})\r\n    const [listItemAdd, setListItemAdd] = useState(false)\r\n\r\n    const [itemDatesAdd, setItemDatesAdd] = useState(item.modules && item.modules.date ? true : false ) \r\n    const [itemCountAdd, setItemCountAdd] = useState(item.modules && item.modules.count ? true : false) \r\n    const [itemTotalAdd, setItemTotalAdd] = useState(item.modules && item.modules.total ? true : false) \r\n\r\n\r\n    let history = useHistory();\r\n\r\n    const nextId = () => items.reduce((id, i)=>( i.id > id ? i.id : id), 0) + 1\r\n\r\n    const handleChange = (e) => {\r\n        const [name, value] = [e.target.name, e.target.value] \r\n        setItemInput(prev => {\r\n            return { ...prev, [name]:value }\r\n        })\r\n        if (name === 'description') {\r\n            setTextAreaHeight(e.target.scrollHeight > 168 ? e.target.scrollHeight + 'px' : \"14rem\" )\r\n        }\r\n    }    \r\n    const handleTitleSave = (e) => { if (e.charCode === 13) handleTitle() } \r\n    const handleTitle = () => {\r\n        if (! itemInput.title || /^\\s*$/.test(itemInput.title)) return\r\n        const i = itemInput\r\n        dispatch({\r\n            type:'UPDATE_ITEM',\r\n            payload: i\r\n        });\r\n        setItemTitle(false)\r\n    }\r\n\r\n    const handleDescription = () => {\r\n        const i = itemInput\r\n        dispatch({\r\n            type:'UPDATE_ITEM',\r\n            payload: i\r\n        });\r\n        setItemDescription(false)\r\n    }\r\n\r\n    const handleChecked = (e) => {\r\n        const check = e.target.checked;\r\n        const listItem = item;\r\n        listItem.status = check;\r\n        dispatch({\r\n            type:'UPDATE_ITEM',\r\n            payload: listItem\r\n        });\r\n        setItemChecked(!itemChecked)\r\n    }\r\n\r\n    const handleAddTotal = () => {\r\n        const i = itemInput\r\n        i.modules ? i.modules.total = {value:0} : i.modules = {total:{value:0}}\r\n\r\n        dispatch({\r\n            type:'UPDATE_ITEM',\r\n            payload: i\r\n        });\r\n        setItemTotalAdd(true)    \r\n    }\r\n\r\n    const handleAddTotalAll = () => {\r\n        const li = listItems.map((i) => {\r\n            if (i.modules) {\r\n                i.modules.total = {value:0}\r\n            } else {\r\n                i.modules = {total:{value:0}}\r\n            }\r\n            return i\r\n        })\r\n        dispatch({\r\n            type:'UPDATE_ITEMS',\r\n            payload: li\r\n        });\r\n        setItemTotalAdd(true)    \r\n    }\r\n\r\n    const handleAddCountAll = () => {\r\n        const li = listItems.map((i) => { if (i.modules) { i.modules.count = {value:0} } else { i.modules = {count:{value:0}} } return i })\r\n        dispatch({\r\n            type:'UPDATE_ITEMS',\r\n            payload: li\r\n        });\r\n        setItemCountAdd(true)    \r\n    }\r\n\r\n    const handleAddCount = () => {\r\n        const i = itemInput\r\n        i.modules ? i.modules.count = {value:0} : i.modules = {count:{value:0}}\r\n        dispatch({\r\n            type:'UPDATE_ITEM',\r\n            payload: i\r\n        });\r\n        setItemCountAdd(true)\r\n    }\r\n\r\n    const handleAddDateAll = () => {\r\n        const li = listItems.map((i) => { if (i.modules) { i.modules.count = {date:null} } else { i.modules = {count:{value:null}} } return i })\r\n        dispatch({\r\n            type:'UPDATE_ITEMS',\r\n            payload: li\r\n        });\r\n    }\r\n\r\n    const handleAddDate = () => {\r\n        const i = itemInput\r\n        i.modules ? i.modules.date = {value:null} : i.modules = {date:{value:null}}\r\n\r\n        dispatch({\r\n            type:'UPDATE_ITEM',\r\n            payload: i\r\n        });\r\n        setItemDatesAdd(true)\r\n    }\r\n\r\n    // List Related\r\n    const handleDragEnd = (result) => {\r\n        if (! result.destination) return \r\n        const _items = Array.from(listItems);\r\n        const [reordered] = _items.splice(result.source.index, 1);\r\n        _items.splice(result.destination.index, 0, reordered);\r\n        _items.forEach((i, index) => i.index = index);      \r\n        dispatch({\r\n            type:'UPDATE_ITEMS',\r\n            payload: _items\r\n        });\r\n    }\r\n\r\n    const handleListItemChange = (e) => {\r\n        const [name, value] = [e.target.name, e.target.value] \r\n        setListItemInput(prev => {\r\n            return { ...prev, [name]:value }\r\n        })\r\n    }\r\n\r\n    const handleListItemSave = (e) => { if (e.charCode === 13) handleListItemAdd() }\r\n\r\n    const handleListItemAdd = () => {\r\n        if (! listItemInput.title || /^\\s*$/.test(listItemInput.title)) return\r\n        const listItem = listItemInput;\r\n        listItem.id = nextId();\r\n        listItem.index = listItems.length;\r\n\r\n        dispatch({\r\n            type:'ADD_ITEM',\r\n            payload: listItem\r\n        });\r\n        setListItemInput({title:'', description:'', tags:[], parent:item.id})\r\n        setListItemAdd(false)\r\n    }\r\n\r\n    const progress = () => {\r\n        const size = listItems.length;\r\n        const checked = listItems.reduce((count, i) => ( i.status === true ? count + 1 : count), 0 )\r\n        const total = ((checked / size) * 100) \r\n        return  isNaN(total) ? '0%' : total.toFixed(0) + '%'\r\n    }\r\n\r\n    let domTitle = useClickOutside(() => {\r\n        setItemTitle(false)\r\n    })\r\n    let domDesc = useClickOutside(() => {\r\n        setItemDescription(false)\r\n    })\r\n    return (\r\n        <div className={`card-panel ${styles.detailCard}`}>\r\n            <div className=\"row\">\r\n                <div className=\"col s12 m8\">\r\n                    { itemTitle ? (\r\n                    <div ref={domTitle}>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Title\"\r\n                        value={itemInput.title}\r\n                        name='title'\r\n                        className={styles.inputSmall}\r\n                        onChange={handleChange}\r\n                        onKeyPress={handleTitleSave}\r\n                    />\r\n                    <button onClick={handleTitle} className=\"btn secondary\">Save</button>\r\n                    <i onClick={() => setItemTitle(false)} className={`material-icons right ${styles.iconClose}`}>close</i>\r\n                    </div>) : (\r\n                    <div>\r\n                        <label className={styles.checkBox}><input type=\"checkbox\" className=\"filled-in\" checked={itemChecked} onChange={handleChecked} /><span></span></label>\r\n                        <h5 onClick={() => setItemTitle(true)} className={styles.heading}>{item.title}</h5>\r\n                        <button className='btn secondary right' onClick={() => history.goBack()}>back</button>\r\n                    </div>)}                    \r\n                    { itemDescription ? (\r\n                    <div ref={domDesc}>\r\n                    <textarea\r\n                        type=\"text\"\r\n                        style={{height:textAreaHeight}}\r\n                        className={`materialize-textarea card-panel ${styles.textArea}`}\r\n                        placeholder=\"Description\"\r\n                        value={itemInput.description}\r\n                        name='description'\r\n                        onChange={handleChange}\r\n                    ></textarea>\r\n                    <button onClick={handleDescription} className=\"btn secondary\">Save</button>\r\n                    <i onClick={() => setItemDescription(false)} className={`material-icons right ${styles.iconClose}`}>close</i>\r\n                    </div>) : (\r\n                    <span onClick={() => setItemDescription(true)} className={`card-panel ${styles.description}`}>{item.description || '...'}</span>\r\n                    )}\r\n                    <ItemDate  item={item} title={true} remove={true} editable={true} showDate={setItemDatesAdd}/>\r\n                    <ItemCount item={item} title={true} remove={true} editable={true} showCount={setItemCountAdd}/>\r\n                    <ItemTotal item={item} listItems={listItems} title={true} remove={true} editable={true} showTotal={setItemTotalAdd}/>\r\n                    <div className={styles.listWrap}>\r\n                        \r\n                        <h5 className={styles.heading}>Checklist</h5>\r\n                        <span className={`right ${styles.progressPerc}`}>{progress()}</span>\r\n                        <div className={styles.progressBar}><div style={{width:progress()}}></div></div>                        \r\n                        <DragDropContext onDragEnd={handleDragEnd}>\r\n                        <Droppable droppableId=\"items\">\r\n                        {(provided) => (\r\n                        <ul \r\n                            className=\"items\"\r\n                            {...provided.droppableProps} \r\n                            ref={provided.innerRef} \r\n                        >   \r\n                            { listItems.map((i, index) => (\r\n                            <Draggable key={i.id} draggableId={'item_'+i.id} index={index}>\r\n                                {(provided) => (\r\n                                    <li ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps} className={`card-panel ${styles.childItem } ${styles.warp}`} >\r\n                                        <ItemListItem item={i} />\r\n                                    </li>                                \r\n                                )}\r\n                            </Draggable>\r\n                            ))} \r\n                            {provided.placeholder} \r\n                        </ul>\r\n                        )} \r\n                        </Droppable>              \r\n                        </DragDropContext>\r\n                    </div>\r\n                    { listItemAdd ? (<>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Title\"\r\n                        value={listItemInput.title}\r\n                        name='title'\r\n                        className={styles.inputSmall}\r\n                        onChange={handleListItemChange}\r\n                        onKeyPress={handleListItemSave}\r\n                    />  \r\n                    <button onClick={handleListItemAdd} className=\"btn secondary\">Save</button>\r\n                    <i onClick={()=>setListItemAdd(false)} className={`material-icons right ${styles.iconClose}`}>close</i>\r\n                    </>) : (\r\n                    <button onClick={()=>setListItemAdd(true)} className=\"btn secondary\">Add item</button>\r\n                    )}\r\n                </div>\r\n                <div className=\"col s12 m4\">\r\n                    <ul className={styles.itemNav}>\r\n                        <li><h5 className={styles.heading}>Modes</h5></li>\r\n                        { ! itemCountAdd && <li><button onClick={handleAddCount} className=\"btn minor\">Add Card Count</button></li>}\r\n                        <li><button onClick={handleAddCountAll} className=\"btn minor\">Add Checklist Counts</button></li>\r\n                        { ! itemDatesAdd && <li><button onClick={handleAddDate} className=\"btn minor\">Add Card Date</button></li>}\r\n                        <li><button onClick={handleAddDateAll} className=\"btn minor\">Add Checklist Dates</button></li>\r\n                        { ! itemTotalAdd && <li><button onClick={handleAddTotal} className=\"btn minor\">Add Card Total</button></li>}\r\n                        <li><button onClick={handleAddTotalAll} className=\"btn minor\">Add Checklist Totals</button></li>\r\n                        \r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
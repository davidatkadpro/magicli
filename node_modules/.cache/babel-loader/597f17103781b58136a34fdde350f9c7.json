{"ast":null,"code":"import _objectSpread from\"D:/Business/Programming/react_lists/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"D:/Business/Programming/react_lists/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/Business/Programming/react_lists/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import styles from'./ItemDetail.module.css';import{Link}from'react-router-dom';import{AppContext}from'../../context/AppContext';import{useClickOutside}from'../Helpers/ClickOutside';import{ItemTotal}from'../ItemModes/ItemTotal';import{ItemCount}from'../ItemModes/ItemCount';import{ItemDate}from'../ItemModes/ItemDate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var ItemListItem=function ItemListItem(_ref){var item=_ref.item;var _useState=useState(item.status||false),_useState2=_slicedToArray(_useState,2),checked=_useState2[0],setChecked=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),itemMenu=_useState4[0],setItemMenu=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),moveMenu=_useState6[0],setMoveMenu=_useState6[1];var _useContext=useContext(AppContext),items=_useContext.items,children=_useContext.children,dispatch=_useContext.dispatch;var listItems=_toConsumableArray(items).filter(function(i){return i.parent===item.id;});var nextId=function nextId(){return items.reduce(function(id,i){return i.id>id?i.id:id;},0)+1;};var handleChecked=function handleChecked(e){var check=e.target.checked;var listItem=item;listItem.status=check;dispatch({type:'UPDATE_ITEM',payload:listItem});setChecked(!checked);};var handleCopy=function handleCopy(){var copy=JSON.parse(JSON.stringify(item));copy.id=nextId();copy.index=listItems.length;copy.title=item.title+' - copy';dispatch({type:'ADD_ITEM',payload:copy});setItemMenu(false);};var handleMoveMenu=function handleMoveMenu(){var availible=_toConsumableArray(items).filter(function(i){return item.id!==i.id&&item.parent!==i.id&&!children(item).includes(i);});setMoveMenu(availible);};var handleMove=function handleMove(e){var key=Number(e.target.dataset.key);var copy=_objectSpread({},item);copy.parent=key>0?key:null;copy.index=items.filter(function(i){return copy.parent===i.parent;}).length;dispatch({type:'UPDATE_ITEM',payload:copy});setMoveMenu(null);setItemMenu(false);};var handleDelete=function handleDelete(){dispatch({type:'DELETE_ITEM',payload:item});setItemMenu(false);};var domMenu=useClickOutside(function(){setItemMenu(false);});return/*#__PURE__*/_jsxs(\"div\",{className:styles.warp,children:[itemMenu&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setItemMenu(false);},className:styles.underlay}),/*#__PURE__*/_jsx(\"div\",{ref:domMenu,className:\"z-depth-5 \".concat(styles.menuWrap),children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return setItemMenu(false);},className:\"material-icons \".concat(styles.icon),children:\"close\"})}),/*#__PURE__*/_jsx(\"li\",{onClick:handleCopy,children:\"Copy\"}),/*#__PURE__*/_jsx(\"li\",{onClick:handleMoveMenu,children:\"Move\"}),moveMenu&&/*#__PURE__*/_jsx(\"li\",{className:styles.scrollList,children:/*#__PURE__*/_jsxs(\"ul\",{children:[item.parent&&/*#__PURE__*/_jsx(\"li\",{onClick:handleMove,\"data-key\":\"0\",children:\"Dashboard\"}),moveMenu.map(function(i){return/*#__PURE__*/_jsx(\"li\",{onClick:handleMove,\"data-key\":i.id,children:i.title},i.id);})]})}),/*#__PURE__*/_jsx(\"li\",{onClick:handleDelete,children:\"Delete\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:styles.checkBox,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"filled-in\",checked:checked,onChange:handleChecked}),/*#__PURE__*/_jsx(\"span\",{})]}),/*#__PURE__*/_jsx(\"h6\",{className:styles.listItemHeading,style:checked?{textDecoration:\"line-through\"}:{textDecoration:\"none\"},children:/*#__PURE__*/_jsx(Link,{to:\"/item/\".concat(item.id),as:\"/item/\".concat(item.id),children:item.title})}),/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return setItemMenu(true);},className:\"material-icons right \".concat(styles.iconHidden),children:\"edit\"}),/*#__PURE__*/_jsx(ItemTotal,{item:item}),/*#__PURE__*/_jsx(ItemCount,{item:item}),/*#__PURE__*/_jsx(ItemDate,{item:item})]})]});};","map":{"version":3,"sources":["D:/Business/Programming/react_lists/src/components/ItemDetail/ItemListItem.js"],"names":["React","useState","useContext","styles","Link","AppContext","useClickOutside","ItemTotal","ItemCount","ItemDate","ItemListItem","item","status","checked","setChecked","itemMenu","setItemMenu","moveMenu","setMoveMenu","items","children","dispatch","listItems","filter","i","parent","id","nextId","reduce","handleChecked","e","check","target","listItem","type","payload","handleCopy","copy","JSON","parse","stringify","index","length","title","handleMoveMenu","availible","includes","handleMove","key","Number","dataset","handleDelete","domMenu","warp","underlay","menuWrap","icon","scrollList","map","checkBox","listItemHeading","textDecoration","iconHidden"],"mappings":"yWAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAwBC,UAAxB,KAAyC,OAAzC,CAEA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,OAASC,eAAT,KAAgC,yBAAhC,CAEA,OAASC,SAAT,KAA0B,wBAA1B,CACA,OAASC,SAAT,KAA0B,wBAA1B,CACA,OAASC,QAAT,KAAyB,uBAAzB,C,6IAEA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAY,IAAVC,CAAAA,IAAU,MAAVA,IAAU,CACpC,cAA8BV,QAAQ,CAACU,IAAI,CAACC,MAAL,EAAe,KAAhB,CAAtC,wCAAOC,OAAP,eAAgBC,UAAhB,eACA,eAAgCb,QAAQ,CAAC,KAAD,CAAxC,yCAAOc,QAAP,eAAiBC,WAAjB,eACA,eAAgCf,QAAQ,CAAC,IAAD,CAAxC,yCAAOgB,QAAP,eAAiBC,WAAjB,eAEA,gBAAsChB,UAAU,CAACG,UAAD,CAAhD,CAAQc,KAAR,aAAQA,KAAR,CAAeC,QAAf,aAAeA,QAAf,CAAyBC,QAAzB,aAAyBA,QAAzB,CACA,GAAMC,CAAAA,SAAS,CAAG,mBAAIH,KAAJ,EAAWI,MAAX,CAAkB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,MAAF,GAAad,IAAI,CAACe,EAAtB,EAAnB,CAAlB,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,SAAMR,CAAAA,KAAK,CAACS,MAAN,CAAa,SAACF,EAAD,CAAKF,CAAL,QAAWA,CAAAA,CAAC,CAACE,EAAF,CAAOA,EAAP,CAAYF,CAAC,CAACE,EAAd,CAAmBA,EAA9B,EAAb,CAAgD,CAAhD,EAAqD,CAA3D,EAAf,CAEA,GAAMG,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CACzB,GAAMC,CAAAA,KAAK,CAAGD,CAAC,CAACE,MAAF,CAASnB,OAAvB,CACA,GAAMoB,CAAAA,QAAQ,CAAGtB,IAAjB,CACAsB,QAAQ,CAACrB,MAAT,CAAkBmB,KAAlB,CACAV,QAAQ,CAAC,CACLa,IAAI,CAAC,aADA,CAELC,OAAO,CAAEF,QAFJ,CAAD,CAAR,CAIAnB,UAAU,CAAC,CAACD,OAAF,CAAV,CACH,CATD,CAWA,GAAMuB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAK,CACpB,GAAIC,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe7B,IAAf,CAAX,CAAX,CACA0B,IAAI,CAACX,EAAL,CAAUC,MAAM,EAAhB,CACAU,IAAI,CAACI,KAAL,CAAanB,SAAS,CAACoB,MAAvB,CACAL,IAAI,CAACM,KAAL,CAAahC,IAAI,CAACgC,KAAL,CAAa,SAA1B,CACAtB,QAAQ,CAAC,CACLa,IAAI,CAAC,UADA,CAELC,OAAO,CAAEE,IAFJ,CAAD,CAAR,CAIArB,WAAW,CAAC,KAAD,CAAX,CACH,CAVD,CAYA,GAAM4B,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB,GAAMC,CAAAA,SAAS,CAAG,mBAAI1B,KAAJ,EAAWI,MAAX,CAAkB,SAAAC,CAAC,QAAIb,CAAAA,IAAI,CAACe,EAAL,GAAYF,CAAC,CAACE,EAAd,EAAoBf,IAAI,CAACc,MAAL,GAAgBD,CAAC,CAACE,EAAtC,EAA6C,CAAEN,QAAQ,CAACT,IAAD,CAAR,CAAemC,QAAf,CAAwBtB,CAAxB,CAAnD,EAAnB,CAAlB,CACAN,WAAW,CAAC2B,SAAD,CAAX,CACH,CAHD,CAIA,GAAME,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACjB,CAAD,CAAO,CACtB,GAAMkB,CAAAA,GAAG,CAAGC,MAAM,CAACnB,CAAC,CAACE,MAAF,CAASkB,OAAT,CAAiBF,GAAlB,CAAlB,CACA,GAAMX,CAAAA,IAAI,kBAAO1B,IAAP,CAAV,CACA0B,IAAI,CAACZ,MAAL,CAAcuB,GAAG,CAAG,CAAN,CAAUA,GAAV,CAAgB,IAA9B,CACAX,IAAI,CAACI,KAAL,CAAatB,KAAK,CAACI,MAAN,CAAa,SAAAC,CAAC,QAAIa,CAAAA,IAAI,CAACZ,MAAL,GAAgBD,CAAC,CAACC,MAAtB,EAAd,EAA4CiB,MAAzD,CACArB,QAAQ,CAAC,CACLa,IAAI,CAAC,aADA,CAELC,OAAO,CAAEE,IAFJ,CAAD,CAAR,CAIAnB,WAAW,CAAC,IAAD,CAAX,CACAF,WAAW,CAAC,KAAD,CAAX,CACH,CAXD,CAaA,GAAMmC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvB9B,QAAQ,CAAC,CACLa,IAAI,CAAC,aADA,CAELC,OAAO,CAAExB,IAFJ,CAAD,CAAR,CAIAK,WAAW,CAAC,KAAD,CAAX,CACH,CAND,CAQA,GAAIoC,CAAAA,OAAO,CAAG9C,eAAe,CAAC,UAAM,CAChCU,WAAW,CAAC,KAAD,CAAX,CACH,CAF4B,CAA7B,CAIA,mBACI,aAAK,SAAS,CAAEb,MAAM,CAACkD,IAAvB,WACKtC,QAAQ,eACT,wCACI,YAAK,OAAO,CAAE,yBAAMC,CAAAA,WAAW,CAAC,KAAD,CAAjB,EAAd,CAAwC,SAAS,CAAEb,MAAM,CAACmD,QAA1D,EADJ,cAEI,YAAK,GAAG,CAAEF,OAAV,CAAmB,SAAS,qBAAejD,MAAM,CAACoD,QAAtB,CAA5B,uBACI,mCACI,iCAAI,UAAG,OAAO,CAAE,yBAAMvC,CAAAA,WAAW,CAAC,KAAD,CAAjB,EAAZ,CAAqC,SAAS,0BAAoBb,MAAM,CAACqD,IAA3B,CAA9C,mBAAJ,EADJ,cAEI,WAAI,OAAO,CAAEpB,UAAb,kBAFJ,cAGI,WAAI,OAAO,CAAEQ,cAAb,kBAHJ,CAIM3B,QAAQ,eACV,WAAI,SAAS,CAAEd,MAAM,CAACsD,UAAtB,uBACI,sBACM9C,IAAI,CAACc,MAAL,eAAe,WAAI,OAAO,CAAEsB,UAAb,CAAyB,WAAS,GAAlC,uBADrB,CAEK9B,QAAQ,CAACyC,GAAT,CAAa,SAAClC,CAAD,qBACd,WAAI,OAAO,CAAEuB,UAAb,CAAoC,WAAUvB,CAAC,CAACE,EAAhD,UAAqDF,CAAC,CAACmB,KAAvD,EAA8BnB,CAAC,CAACE,EAAhC,CADc,EAAb,CAFL,GADJ,EALJ,cAaI,WAAI,OAAO,CAAEyB,YAAb,oBAbJ,GADJ,EAFJ,GAFJ,cAsBI,oCACI,eAAO,SAAS,CAAEhD,MAAM,CAACwD,QAAzB,wBAAmC,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,WAAjC,CAA6C,OAAO,CAAE9C,OAAtD,CAA+D,QAAQ,CAAEgB,aAAzE,EAAnC,cAA6H,eAA7H,GADJ,cAEI,WAAI,SAAS,CAAE1B,MAAM,CAACyD,eAAtB,CAAuC,KAAK,CAAE/C,OAAO,CAAG,CAACgD,cAAc,CAAC,cAAhB,CAAH,CAAqC,CAACA,cAAc,CAAC,MAAhB,CAA1F,uBAAmH,KAAC,IAAD,EAAM,EAAE,iBAAWlD,IAAI,CAACe,EAAhB,CAAR,CAA8B,EAAE,iBAAWf,IAAI,CAACe,EAAhB,CAAhC,UAAuDf,IAAI,CAACgC,KAA5D,EAAnH,EAFJ,cAGI,UAAG,OAAO,CAAE,yBAAI3B,CAAAA,WAAW,CAAC,IAAD,CAAf,EAAZ,CAAoC,SAAS,gCAA0Bb,MAAM,CAAC2D,UAAjC,CAA7C,kBAHJ,cAII,KAAC,SAAD,EAAW,IAAI,CAAEnD,IAAjB,EAJJ,cAKI,KAAC,SAAD,EAAW,IAAI,CAAEA,IAAjB,EALJ,cAMI,KAAC,QAAD,EAAW,IAAI,CAAEA,IAAjB,EANJ,GAtBJ,GADJ,CAiCH,CA/FM","sourcesContent":["import React, {useState,useContext} from 'react'\r\n\r\nimport styles from './ItemDetail.module.css';\r\nimport { Link } from 'react-router-dom';\r\nimport { AppContext } from '../../context/AppContext';\r\nimport { useClickOutside } from '../Helpers/ClickOutside';\r\n\r\nimport { ItemTotal } from '../ItemModes/ItemTotal';\r\nimport { ItemCount } from '../ItemModes/ItemCount';\r\nimport { ItemDate } from '../ItemModes/ItemDate';\r\n\r\nexport const ItemListItem = ({item}) => {\r\n    const [checked, setChecked] = useState(item.status || false)\r\n    const [itemMenu, setItemMenu] = useState(false)\r\n    const [moveMenu, setMoveMenu] = useState(null)\r\n\r\n    const { items, children, dispatch } = useContext(AppContext);\r\n    const listItems = [...items].filter(i => i.parent === item.id)\r\n\r\n    const nextId = () => items.reduce((id, i)=>( i.id > id ? i.id : id), 0) + 1\r\n\r\n    const handleChecked = (e) => {\r\n        const check = e.target.checked;\r\n        const listItem = item;\r\n        listItem.status = check;\r\n        dispatch({\r\n            type:'UPDATE_ITEM',\r\n            payload: listItem\r\n        });\r\n        setChecked(!checked)\r\n    }\r\n\r\n    const handleCopy = () =>{\r\n        let copy = JSON.parse(JSON.stringify(item));\r\n        copy.id = nextId()\r\n        copy.index = listItems.length\r\n        copy.title = item.title + ' - copy'\r\n        dispatch({\r\n            type:'ADD_ITEM',\r\n            payload: copy\r\n        });\r\n        setItemMenu(false)\r\n    }\r\n\r\n    const handleMoveMenu = () => {\r\n        const availible = [...items].filter(i => item.id !== i.id && item.parent !== i.id  && ! children(item).includes(i))\r\n        setMoveMenu(availible)\r\n    }\r\n    const handleMove = (e) => {\r\n        const key = Number(e.target.dataset.key)        \r\n        const copy = {...item}        \r\n        copy.parent = key > 0 ? key : null;\r\n        copy.index = items.filter(i => copy.parent === i.parent).length\r\n        dispatch({\r\n            type:'UPDATE_ITEM',\r\n            payload: copy\r\n        });\r\n        setMoveMenu(null)\r\n        setItemMenu(false)\r\n    }\r\n\r\n    const handleDelete = () => {\r\n        dispatch({\r\n            type:'DELETE_ITEM',\r\n            payload: item\r\n        });\r\n        setItemMenu(false)\r\n    }\r\n\r\n    let domMenu = useClickOutside(() => {\r\n        setItemMenu(false)\r\n    })\r\n\r\n    return (\r\n        <div className={styles.warp}>\r\n            {itemMenu && \r\n            <>\r\n                <div onClick={() => setItemMenu(false)} className={styles.underlay}></div>\r\n                <div ref={domMenu} className={`z-depth-5 ${styles.menuWrap}`}>\r\n                    <ul>\r\n                        <li><i onClick={() => setItemMenu(false)}className={`material-icons ${styles.icon}`}>close</i></li>\r\n                        <li onClick={handleCopy}>Copy</li>\r\n                        <li onClick={handleMoveMenu}>Move</li>\r\n                        { moveMenu &&\r\n                        <li className={styles.scrollList}>\r\n                            <ul>\r\n                                { item.parent && <li onClick={handleMove} data-key='0'>Dashboard</li>}\r\n                                {moveMenu.map((i)=>(\r\n                                <li onClick={handleMove} key={i.id} data-key={i.id}>{i.title}</li>\r\n                                ))}\r\n                            </ul>\r\n                        </li>}\r\n                        <li onClick={handleDelete}>Delete</li>\r\n                    </ul>\r\n                </div>\r\n            </>}\r\n            <div>\r\n                <label className={styles.checkBox}><input type=\"checkbox\" className=\"filled-in\" checked={checked} onChange={handleChecked} /><span></span></label>\r\n                <h6 className={styles.listItemHeading} style={checked ? {textDecoration:\"line-through\"} : {textDecoration:\"none\"}}><Link to={`/item/${item.id}`} as={`/item/${item.id}`}>{item.title}</Link></h6>\r\n                <i onClick={()=>setItemMenu(true)}  className={`material-icons right ${styles.iconHidden}`}>edit</i>\r\n                <ItemTotal item={item} />\r\n                <ItemCount item={item} />\r\n                <ItemDate  item={item} />            \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}